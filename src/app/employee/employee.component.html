<p-dataTable
  [expandableRows]="true"
  [resizableColumns]="false"
  [editable]="true"
  [(value)]="employees"
  [paginator]="employees.length > 10"
  [rows]="10"
  (onRowSelect)="onRowSelect()"
  [selectionMode]="'single'">
  <p-header class="clearfix">
    <p class="pull-left title">员工信息概览</p>
    <div class="ui-inputgroup pull-right employee-adder">
      <button pButton [icon]="'fa-plus'" type="button" [label]="'添加员工信息'" (click)="showAdderDialog()"></button>
    </div>
    <div class="ui-g pull-right">
      <div class="ui-inputgroup employee-searcher">
        <input type="text" pInputText [formControl]="keyword" placeholder="请输入员工姓名">
        <span class="ui-inputgroup-addon"><i class="fa fa-search"></i></span>
      </div>
    </div>
  </p-header>
  <p-column [styleClass]="'col-icon'" [expander]="true"></p-column>
  <p-column [styleClass]="'col'" [field]="'name'" [header]="'姓名'"></p-column>
  <p-column [styleClass]="'col'" [field]="'sex'" [header]="'性别'"></p-column>
  <p-column [styleClass]="'col'" [field]="'birthday'" [header]="'生日'"></p-column>
  <p-column [styleClass]="'col'" [field]="'education'" [header]="'学历'"></p-column>
  <p-column [styleClass]="'col'" [field]="'phone'" [header]="'手机号码'"></p-column>
  <p-column [styleClass]="'col'" [field]="'email'" [header]="'邮箱'"></p-column>
  <ng-template let-employee pTemplate="rowexpansion">
    <div class="ui-grid ui-grid-responsive ui-fluid">
      <div class="ui-grid-row">
        <div class="ui-grid-col-2 col-label">紧急联系人姓名:</div>
        <div class="ui-grid-col-10 col-value">{{ employee.clamantName }}</div>
      </div>
      <div class="ui-grid-row">
        <div class="ui-grid-col-2 col-label">紧急联系人电话:</div>
        <div class="ui-grid-col-10 col-value">{{ employee.clamantPhone }}</div>
      </div>
      <div class="ui-grid-row">
        <div class="ui-grid-col-2 col-label">身份证号:</div>
        <div class="ui-grid-col-10 col-value">{{ employee.idCard }}</div>
      </div>
      <div class="ui-grid-row">
        <div class="ui-grid-col-2 col-label">家庭住址:</div>
        <div class="ui-grid-col-10 col-value">{{ employee.address }}</div>
      </div>
      <div class="ui-grid-row">
        <div class="ui-grid-col-2 col-label">描述信息:</div>
        <div class="ui-grid-col-10 col-value">{{ employee.remark }}</div>
      </div>
      <div class="ui-grid-row">
        <div class="ui-grid-col-2 col-label">毕业院校:</div>
        <div class="ui-grid-col-10 col-value">{{ employee.graduationSchool }}</div>
      </div>
      <div class="ui-grid-row">
        <div class="ui-grid-col-2 col-label">专业:</div>
        <div class="ui-grid-col-10 col-value">{{ employee.specialty }}</div>
      </div>
    </div>
  </ng-template>
</p-dataTable>


<p-dialog [(visible)]="showEmployeeDialog" [modal]="true" [responsive]="true" [width]="420">
  <p-header>{{ chosenEmployee.id ? '编辑' : '新增' }} {{ chosenEmployee.id && ('[' + chosenEmployee.name  + ']')  }} 课程条目</p-header>

  <div class="ui-grid ui-grid-responsive ui-fluid">
    <div class="ui-grid-row">
      <div class="ui-grid-col-3"><label for="name">姓名</label></div>
      <div class="ui-grid-col-9"><p-dropdown id="name" [options]="genders" [(ngModel)]="chosenEmployee.sex" [style]="{'width':'100%'}"></p-dropdown></div>
    </div>

    <div class="ui-grid-row">
      <div class="ui-grid-col-3"><label for="gender">性别</label></div>
      <div class="ui-grid-col-9"><p-dropdown id="gender" [options]="genders" [(ngModel)]="chosenEmployee.sex" [style]="{'width':'100%'}"></p-dropdown></div>
    </div>

    <div class="ui-grid-row">
      <div class="ui-grid-col-3"><label for="birthday">生日</label></div>
      <div class="ui-grid-col-9"><input type="text" pInputText id="birthday" [(ngModel)]="chosenEmployee.birthday"></div>
    </div>

    <div class="ui-grid-row">
      <div class="ui-grid-col-3"><label for="idCard">身份证号</label></div>
      <div class="ui-grid-col-9"><input type="text" pInputText id="idCard" [(ngModel)]="chosenEmployee.idCard"></div>
    </div>

    <div class="ui-grid-row">
      <div class="ui-grid-col-3"><label for="education">学历</label></div>
      <div class="ui-grid-col-9"><input type="text" pInputText id="education" [(ngModel)]="chosenEmployee.education"></div>
    </div>

    <div class="ui-grid-row">
      <div class="ui-grid-col-3"><label for="graduationSchool">毕业院校</label></div>
      <div class="ui-grid-col-9"><input type="text" pInputText id="graduationSchool" [(ngModel)]="chosenEmployee.graduationSchool"></div>
    </div>
  </div>

  <p-footer>
    <div class="ui-dialog-buttonpane ui-helper-clearfix">
      <button *ngIf="chosenEmployee.id" class="btn btn-danger" type="button" (click)="deleteEmployee(chosenEmployee.name)"><span class="fa fa-close">删除</span></button>
      <button
        [disabled]="!chosenEmployee.name"
        class="btn btn-primary"
        type="button"
        (click)="saveEditedEmployee()">
        <span class="fa {{ chosenEmployee.id ? 'fa-check':'fa-plus' }}">{{ chosenEmployee.id ? '保存': '新增' }}</span>
      </button>
    </div>
  </p-footer>
</p-dialog>

<p-confirmDialog
  [header]="'确定删除该课程？'"
  [width]="425"
  [icon]="'fa fa-question-circle'"
  [rejectLabel]="'取消'"
  [acceptLabel]="'确定'"></p-confirmDialog>
